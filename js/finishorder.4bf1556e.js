(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["finishorder"],{"7a16":function(t,e,s){t.exports=s.p+"img/icon-homepage.f5bb796f.png"},a21f:function(t,e,s){var a=s("584a"),i=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},c0c2:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"finishOrder"},[a("div",{staticClass:"header-fixed"},[a("header-top",[a("div",{staticClass:"left",attrs:{slot:"menu"},slot:"menu"},[a("router-link",{staticClass:"text-icon-options toHome",attrs:{to:"/home"}},[a("img",{attrs:{src:s("7a16")}}),a("span",[t._v(t._s(t.lang("首页")))])])],1),a("div",{staticClass:"mdui-center mdui-valign point-progress",attrs:{slot:"title"},slot:"title"},[a("ul",[a("li",{staticClass:"active"},[a("i",[t._v("1")])]),a("li",{staticClass:"active"}),a("li",{staticClass:"active"},[a("i",[t._v("2")])]),a("li",{staticClass:"active"}),a("li",{staticClass:"active"},[a("i",[t._v("3")])])]),a("ul",[a("li",{staticClass:"active"},[a("i",[t._v(t._s(t.lang("确认商品")))])]),a("li",{staticClass:"active"},[a("i",[t._v(t._s(t.lang("填写资料")))])]),a("li",{staticClass:"active"},[a("i",[t._v(t._s(t.lang("订单完成")))])])])])])],1),a("div",{staticStyle:{height:"40px"}}),a("div",{staticClass:"mdui-order"},[t._m(0),"1"!==t.orderInfo.payment?a("div",{staticClass:"mdui-text-center mdui-m-y-1"},[a("span",[t._v(t._s(t.lang("下单成功，我们将尽快为您配送！")))])]):"1"!==t.orderInfo.payment||t.cancelledFlag||t.paySuccess||"finish"!==t.$route.name?t._e():a("div",{staticClass:"mdui-text-center mdui-m-y-1"},[a("span",[t._v(t._s(t.lang("下单成功，请您进行付款！")))])]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.paySuccess||"success"===t.$route.name,expression:"paySuccess||$route.name==='success'"}],staticClass:"mdui-text-center mdui-m-y-1"},[a("span",[t._v(t._s(t.lang("付款成功！")))]),t._m(1)]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.cancelledFlag&&!t.paySuccess,expression:"cancelledFlag && !paySuccess"}],staticClass:"mdui-text-center mdui-m-y-1"},[a("span",[t._v("您取消了付款，请重新付款")])]),"1"!==t.orderInfo.payment||t.paySuccess||"finish"!==t.$route.name?t._e():a("div",{staticClass:"mdui-paypal-btn"},[a("form",{attrs:{action:"https://www.paypal.com/cgi-bin/webscr",method:"post",id:"sform"}},[a("input",{attrs:{type:"hidden",name:"cmd",value:"_xclick"}}),a("input",{attrs:{type:"hidden",name:"business"},domProps:{value:t.siteInfo.Paypal.paycode}}),a("input",{attrs:{type:"hidden",name:"item_name"},domProps:{value:t.orderInfo.clientname}}),a("input",{attrs:{id:"item_number",type:"hidden",name:"item_number",value:"1"}}),a("input",{attrs:{id:"amount",type:"hidden",name:"amount"},domProps:{value:t.orderInfo.orderprice}}),a("input",{attrs:{type:"hidden",name:"currency_code"},domProps:{value:t.currency}}),a("input",{attrs:{type:"hidden",name:"return"},domProps:{value:t.successUrl}}),a("input",{attrs:{type:"hidden",name:"notify_url"},domProps:{value:t.orderUrl}}),a("input",{attrs:{type:"hidden",name:"cancel_return"},domProps:{value:t.successUrl}}),a("input",{attrs:{id:"invoice",type:"hidden",name:"invoice"},domProps:{value:t.orderInfo.orderid}}),a("input",{attrs:{type:"hidden",name:"charset",value:"utf-8"}}),a("input",{attrs:{type:"hidden",name:"no_shipping",value:"1"}}),a("input",{attrs:{type:"hidden",name:"no_note",value:"remark Recharge"}}),a("input",{attrs:{type:"hidden",name:"bn",value:"IC_Sample"}}),a("input",{attrs:{type:"hidden",name:"rm",value:"2"}}),a("input",{staticClass:"paypal-img",attrs:{type:"image",src:"https://shop.static.zxkf.cc/paypal.svg",name:"submit",alt:"payments with payPal!"}})])])]),a("div",{staticClass:"mdui-detail"},[t.orderInfo.orderid?a("div",{staticClass:"detail"},[a("div",{staticClass:"mdui-ordersn"},[a("span",[t._v(t._s(t.lang("订单号"))+" : "+t._s(t.orderInfo.orderid))]),a("button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.copyUrl,expression:"copyUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopy,expression:"onCopy",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onErro,expression:"onErro",arg:"error"}],staticClass:"mdui-btn mdui-color-default mdui-btn-copy",attrs:{"data-clipboard-text":"XH1073827872"},on:{click:function(e){return t.copyId()}}},[t._v(t._s(t.lang("复制"))+"\n\t\t\t\t")])]),"1"!==t.orderInfo.payment||(t.paySuccess?t.paySuccess:t.orderInfo.succeed)?a("span",[t._v(t._s(t.lang("下单成功，我们将尽快为您配送！")))]):t._e(),a("div",{staticClass:"picList"},[a("div",{staticClass:"picBox"},t._l(this.imglist,function(e,s){return a("img",{key:s,attrs:{src:e?t.config.cdnbase+e:"",width:"80"}})}),0)])]):t._e()]),a("div",{staticClass:"mdui-text-center mdui-order-tip"},[t.orderInfo.pay_receipt_url?a("a",{staticClass:"pay-detail",attrs:{href:t.orderInfo.pay_receipt_url}},[t._v(t._s(t.lang("查看付款凭证")))]):t._e(),t.paySuccess?a("a",{staticClass:"pay-detail",attrs:{href:t.returnUrl}},[t._v(t._s(t.lang("查看付款凭证")))]):t._e(),a("span",[t._v("\n\t\t\t"+t._s(t.lang("建议保存"))+"\n\t\t\t"),a("span",{staticClass:"mdui-order-tip-text"},[t._v(t._s(t.lang("订单号")))]),t._v("\n\t\t\t"+t._s(t.lang("和"))+"\n\t\t\t"),a("span",{staticClass:"mdui-order-tip-text"},[t._v(t._s(t.lang("商城链接")))]),t._v("，"+t._s(t.lang("方便查询订单"))+"\n\t\t")])]),a("div",{ref:"marsk",staticClass:"marsk",staticStyle:{display:"none"}})])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mdui-text-center"},[a("img",{staticClass:"success",attrs:{src:s("e4cd")}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("span",[t._v("您已支付成功，再"),s("a",{staticStyle:{color:"#ce2424"},attrs:{href:"/home"}},[t._v("去逛逛")])])}],n=s("f499"),r=s.n(n),o=(s("96cf"),s("3b8d")),c=s("cebc"),l=s("5880"),d=s("0833"),p={data:function(){return{copyUrl:"",orderid:"",paypal:{sandbox:"",production:""},myStyle:{label:"checkout",size:"medium",shape:"rect",color:"gold",tagline:!1},amount:0,currency:"",cancelledFlag:!1,paySuccess:!1,returnUrl:"",sandboxFlag:"",orderUrl:"",imglist:"",successUrl:""}},created:function(){this.imglist=this.$store.state.imglist,this.paypal.sandbox=this.siteInfo.Paypal?this.siteInfo.Paypal.paycode:"",this.paypal.production=this.siteInfo.Paypal?this.siteInfo.Paypal.paycode:"",this.amount=this.orderInfo.orderprice+"",this.currency="TWD","NT"===this.siteInfo.money?this.currency="TWD":"HK"===this.siteInfo.money?this.currency="HKD":"RM"===this.siteInfo.money?this.currency="MYR":"฿"===this.siteInfo.money?this.currency="THB":"Rp"===this.siteInfo.money?this.currency="INR":"円"===this.siteInfo.money&&(this.currency="JPY"),this.sandboxFlag="production",this.orderInfo||this.$router.push("/home")},mounted:function(){this.orderUrl="".concat(window.location.origin,"/api/shop/paypalPayment"),this.successUrl="".concat(window.location.origin,"/finishOrder")},destroyed:function(){this.$store.state.imglist=[],this.$store.state.orderId=""},methods:Object(c["a"])({},Object(l["mapMutations"])(["setOrder"]),{copyId:function(){this.copyUrl=this.$store.state.orderId},onCopy:function(){this.$toast.bottom(this.lang("复制成功"))},onErro:function(){this.$toast.bottom(this.lang("复制失败"))},paymentCompleted:function(){var t=Object(o["a"])(regeneratorRuntime.mark(function t(e){var s,a,i,n,o,c;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return s=e.response,a=e.data,this.$refs.marsk.style.display="block",this.$loading("loading..."),t.next=5,d["f"].submitOrderPaypal({clientinfo:{payment:1},orderid:this.$store.state.orderId,create_time:s.create_time,price:s.transactions[0].amount.total,currency:s.transactions[0].amount.currency,pay_id:a.payerID,paymentID:a.paymentID,paymentToken:a.paymentToken,returnUrl:a.returnUrl,orderidP:a.orderID,type:"paypal",state:1});case 5:if(i=t.sent,!i.Error){t.next=13;break}return this.$refs.marsk.style.display="none",this.$loading.close(),n=this.siteInfo.language,t.abrupt("return",this.$toast.bottom(i.Info[n]));case 13:for(this.$loading.close(),this.$refs.marsk.style.display="none",this.cancelledFlag=!1,this.paySuccess=!0,this.returnUrl=a.returnUrl,o=JSON.parse(localStorage.getItem("cart_info")),c=0;c<o.list.length;c++)o.list[c].checked&&o.list.splice(c--,1);localStorage.setItem("cart_info",r()(o)),localStorage.removeItem("orderInfo");case 22:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),paymentCancelled:function(){this.cancelledFlag=!0}}),computed:Object(c["a"])({},Object(l["mapState"])(["language","siteInfo","orderInfo","config"]),{lang:function(){return function(t){return this.language?this.language[t]:""}}})},u=p,m=(s("ddb6"),s("2877")),y=Object(m["a"])(u,a,i,!1,null,"ab9f30e8",null);e["default"]=y.exports},c740:function(t,e,s){},ddb6:function(t,e,s){"use strict";var a=s("c740"),i=s.n(a);i.a},e4cd:function(t,e,s){t.exports=s.p+"img/icon-success.dff706e3.png"},f499:function(t,e,s){t.exports=s("a21f")}}]);
//# sourceMappingURL=finishorder.4bf1556e.js.map